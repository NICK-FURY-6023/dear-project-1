{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Found Items</title>
    <link rel="stylesheet" href="{% static 'css/view_found.css' %}">
    <script src="{% static 'js/view_found.js' %}" defer></script>
</head>
<body>

    <header>
        <h1>Lost & Found Portal</h1>
        <nav>
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'report_found' %}">Report Found Item</a>
            <a href="{% url 'view_found' %}" class="active">View Found Items</a>
            {% if user.is_authenticated %}
                <a href="{% url 'my_found_items' %}">My Items</a>
                <a href="{% url 'logout' %}">Logout</a>
            {% else %}
                <a href="{% url 'login' %}">Login</a>
            {% endif %}
        </nav>
    </header>

    <main>
        <section class="items-list">
            <h2>Recently Found Items</h2>
            <p>Browse the list of items reported as found.</p>

            {% if items %}
                <div class="items-container">
                    {% for item in items %}
                        <div class="item-card">
                            {% if item.image %}
                                <img src="{{ item.image.url }}" alt="Item Image" class="item-image">
                            {% else %}
                                <img src="{% static 'images/no-image.svg' %}" alt="No Image" class="item-image">
                            {% endif %}
                            
                            <div class="item-details">
                                <h3>{{ item.item_name }}</h3>
                                <p><strong>Description:</strong> {{ item.description }}</p>
                                <p><strong>Category:</strong> {{ item.get_category_display }}</p>
                                <p><strong>Location Found:</strong> {{ item.location }}</p>
                                <p><strong>Date Found:</strong> {{ item.date_found }}</p>
                                <p><strong>Reported By:</strong> {{ item.user.username }}</p>

                                {% if item.is_claimed %}
                                    <p style="color: #28a745; font-weight: 600;">âœ… Already Claimed</p>
                                {% else %}
                                    {% if user != item.user %}
                                        <a href="{% url 'claim_item' item.id %}" class="claim-btn" 
                                           style="display: inline-block; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); 
                                                  color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; 
                                                  margin-top: 10px; font-weight: 600;">
                                            ðŸ“‹ Claim This Item
                                        </a>
                                    {% endif %}
                                {% endif %}

                                {% if user.is_authenticated and user != item.user %}
                                    <a href="{% url 'chat_with_user' item.user.username %}" 
                                       style="display: inline-block; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); 
                                              color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; 
                                              margin-top: 10px; margin-left: 10px; font-weight: 600;">
                                        ðŸ’¬ Chat with Finder
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-items">No found items available at the moment.</p>
            {% endif %}
        </section>
    </main>

</body>
</html>
